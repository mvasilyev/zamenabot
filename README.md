# Проверка данных из Google Sheets и уведомления в Telegram

Это приложение на Go проверяет Google Sheet на наличие данных о событиях для конкретного класса, фильтрует будущие события и отправляет уведомления в указанный чат Telegram. Бот избегает отправки дублирующих сообщений, отслеживая хеши отправленных сообщений.

## Особенности

- Периодическая проверка обновлений в настраиваемое время (например, 6:00, 12:00, 18:00).
- Получение данных из публичного Google Sheet.
- Фильтрация данных по классу и будущим датам.
- Отправка уведомлений в чат Telegram с использованием Telegram Bot API.
- Избежание отправки дублирующих сообщений с помощью проверки хешей сообщений SHA256.

## Требования

- Go 1.18 или новее
- Токен Telegram-бота
- ID Google Sheet
- ID чата Telegram

## Настройка

1. **Клонируйте этот репозиторий** или скачайте исходный код:

    ```bash
    git clone https://github.com/your-username/google-sheet-notifier.git
    cd google-sheet-notifier
    ```

2. **Установите зависимости**:

    Приложение использует пакет `github.com/joho/godotenv` для загрузки переменных окружения из файла `.env`. Для установки зависимостей выполните команду:

    ```bash
    go mod tidy
    ```

3. **Создайте файл `.env`** в корневой директории проекта с такими переменными:

    ```
    BOT_TOKEN=your_telegram_bot_token
    CHAT_ID=your_telegram_chat_id
    SHEET_ID=your_google_sheet_id
    CLASS_ID=your_class_id (например, "7Ю")
    CHECK_TIMES=06:00,12:00,18:00 (список времен через запятую для проверки)
    ```

    Замените плейсхолдеры на ваши реальные значения. `BOT_TOKEN` необходим для взаимодействия с Telegram, а `SHEET_ID` — это ID Google Sheet, из которого будут получены данные. `CLASS_ID` — это необязательный параметр, используемый для фильтрации событий по конкретному классу.

4. **Запустите приложение**:

    Чтобы запустить приложение, выполните:

    ```bash
    go run main.go
    ```

    Приложение будет работать бесконечно, проверяя обновления в заданное время.

## Аргументы командной строки

Вы можете переопределить переменные окружения с помощью аргументов командной строки:

- `--bot-token`: Переопределить токен Telegram-бота.
- `--chat-id`: Переопределить ID чата Telegram.
- `--sheet-id`: Переопределить ID Google Sheet.
- `--class-id`: Переопределить ID класса для фильтрации событий.
- `--check-times`: Переопределить список времен для проверки.

Пример:

```bash
go run main.go --bot-token=your_telegram_bot_token --chat-id=your_telegram_chat_id --sheet-id=your_google_sheet_id --check-times="06:00,12:00"
```

## Лицензия
Этот проект лицензирован по лицензии MIT.